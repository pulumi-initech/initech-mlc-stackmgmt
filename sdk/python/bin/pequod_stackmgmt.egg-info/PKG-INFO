Metadata-Version: 2.1
Name: pequod_stackmgmt
Version: 3.1.1
Requires-Python: >=3.7
Description-Content-Type: text/markdown
Requires-Dist: parver>=0.2.1
Requires-Dist: pulumi<4.0.0,>=3.0.0
Requires-Dist: pulumi-command<1.0.0,>=0.0.0
Requires-Dist: pulumi-pulumiservice<1.0.0,>=0.0.0
Requires-Dist: semver>=2.8.1

# Pequod Stack Management Multilanguage Component
This multilanguage component is used to manage various stack settings when launching stacks in the pequod organization via new project wizard.

## Building and Publishing the MLC 
Whenever the component code (under provider/cmd/pulumi-resource...) or schema.json, etc has been udated, follow the process below to make the updated version available:
* Build the SDKs and plugins
* Publish the plugins
* Publish the SDKs

## Build SDKs and Plugins
From the main directory (where the Makefile is located), do the following:
* Update `VERSION` in the Makefile to the next release.
* Execute these steps on the command line:
```bash
# Regen the SDKs
make generate
make build

# Rebuild the plugins
make dist
```



## Publish the Plugins
* Push/merge the code to the repo.
* Create a new github release of this repo using the same version number in the Makefile.
* Upload the files in the `dist` folder as attachments to the release.

## Publish the SDKs

### Typescript
Pequod uses AWS CodeArtifact repo for TS SDKs. 

To publish to the codeartifact repo: 
* cd to the `sdk/nodejs/bin` folder
* run `aws codeartifact login --tool npm --region us-east-2 --repository pequod-codeartifact-repo --domain pequod-codeartifact-domain`
* Run `npm publish` to push the module to the artifactory.`

Refer to the `pequod-templates` repo for `package.json` and code examples of how to use this package.

### Python
Pequod currently uses github versioning to distribute python packages.  
The build process above sets things up for this.

Refer to the `pequod-templates` repo for `requirements.txt` and code examples of how to use this package.

### .NET
TBD

### Go
TBD

## Testing Notes
Easiest way to test is with a Python program.
* Do all the `make` steps above.
* Create a release as described above except:
  * Point it at the branch you are developing on.
  * Create it as a pre-release.
* Git Clone a python project from pequod and modify the `requirements.txt` to include the tag for the pre-release you created above.
  * e.g. `pequod_stackmgmt @ git+https://github.com/pulumi-pequod/pequod-mlc-stackmgmt.git@v3.1.1#subdirectory=sdk/python/bin`
    * NOTE the `@v3.1.1` - this would be whatever tag used for the given pre-release.

## TODOs
* Add an example or two.
* Add some documentation.

## Troubleshooting
* Get netcoreapp3.1 compatibility error message
  * cd to provider
  * modify go.mod with latest pulumi version
  * `go mod tidy`
  * cd .. and run `make generate`
    * If you get an error about something just run the `go ...` command that is suggested
